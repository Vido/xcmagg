<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>XCMAGG</title>
		<link rel="stylesheet" href="https://cdn.datatables.net/2.3.4/css/dataTables.dataTables.css"/>
		<style>
			body {
				margin: 0;
				padding: 0;
				font-family: sans-serif;
				display: flex;
				flex-direction: column;
				min-height: 100vh;
				overflow-x: hidden;
			}
			nav a {
				text-decoration: none;
				color: white;
				transition: 0.3s;
			}
			nav a:hover {
				opacity: 0.7;
			}
			.logo {
				font-size: 24px;
				font-weight: bold;
				letter-spacing: 1px;
			}
			nav.navbar {
				box-sizing: border-box;
				background: #333333;
				display: flex;
				justify-content: space-around;
				align-items: center;
				height: 8vh;
				flex-wrap: wrap;
			}
			.nav-list {
				padding: 0;
				list-style: none;
				display: flex;
			}
			.nav-list li {
				letter-spacing: 1px;
				margin-left: 17px;
				margin-right: 17px;
			}
			.content{
				margin: auto;
				flex: 1;
				width: 85%;
				max-width: 100%;
				box-sizing: border-box;
			}
			.content h1{
				text-align: center;
			}
			.table-setup {
				width: 100%;
				overflow-x: auto
			}
			#table th, #table td {
				word-break: break-word;
			}
			div#contato div.banner-contato{
				background-image: url('contato.png');
				background-repeat: no-repeat;
				background-size: contain;
				background-position: center;
				height: 15vh;
			}
			div#contato p{
				margin: 15px 0 5px;
				text-align: center;
				font-weight: bold;
				font-size: 24px;
			}
			footer.footer {
				background: #333333;
				color: white;
				padding: 20px 0;
				margin-top: 40px;
			}

			.footer-content {
				width: 85%;
				margin: 0 auto;
				display: flex;
				align-items: center;
				flex-wrap: wrap;
			}

			.footer-content p {
				margin: 0;
				font-size: 14px;
			}
			@media (max-width: 768px) {
				.content {
					width: 95%;
				}

				nav.navbar {
					flex-direction: column;
					height: auto;
					padding: 10px 0;
				}

				.logo {
					margin-bottom: 10px;
				}
			}
		</style>
	</head>
	<body>
		<nav class="navbar">
			<a href="#" class="logo">XCMAGG</a>
			<ul class="nav-list">
				<li><a href="#">Gear FTP</a></li>
				<li><a href="#contato">Contato</a></li>
				<li><a href="https://forms.gle/oo9s7hdqg29Wznkz7">Newsletter</a></li>
			</ul>
		</nav>
		<div class="content">
			<h1>Próximos eventos</h1>
			<div class="table-setup">
				<table id="table" class="display">
					<thead>
						<tr>
							<th>Data</th>
							<th>Nome do evento</th>
							<th>UF/Cidade</th>
						</tr>
					</thead>
					<tbody>
					</tbody>
				</table>
			</div>
			<div id="contato">
				<p>Entre em contato</p>
				<div class="banner-contato">
				</div>
			</div>
		</div>
		<footer class="footer">
			<div class="footer-content">
				<p>&copy; 2025 XCMAGG. Todos os direitos reservados.</p>
			</div>
	</footer>

	</body>
	<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
	<script src="https://cdn.datatables.net/2.3.4/js/dataTables.js"></script>
	<script src="https://cdn.datatables.net/plug-ins/1.13.7/sorting/date-eu.js"></script>
	<script>
		const body = document.querySelector('#table tbody');

		fetch('https://xcmagg.lvido.tech/data.jsonl')
			.then(response => response.text())
			.then(text => {
						const lines = text.trim().split('\n').filter(Boolean);
						const jsonArray = lines.map(line => JSON.parse(line));
						jsonArray.forEach(item => {
									const row = document.createElement('tr');
									var location = item.location.location_raw
									if (item.location.uf && item.location.city){
												location = item.location.uf + ' / ' + item.location.city
											}
									row.innerHTML = `
		   <td data-label="Data">${item.date_range.start_date}</td>
	       <td data-label="Título"><a href="${item.url}" target="_blank">${item.title}</a></td>
	       <td data-label="UF/Cidade">${location}</td>
	       `;
									body.appendChild(row);
								});
						$('#table').DataTable({
								columnDefs: [
									{ type: 'date-eu', targets: 0 }
								],
								order: [[0, 'asc']]
						});
					})
			.catch(error => console.error('Erro:', error));

	</script>
</html>
